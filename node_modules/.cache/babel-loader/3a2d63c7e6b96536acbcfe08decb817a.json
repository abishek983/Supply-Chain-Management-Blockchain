{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\abishek_mondal\\\\Desktop\\\\SCM_BLOCKCHAIN-master\\\\scm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\abishek_mondal\\\\Desktop\\\\SCM_BLOCKCHAIN-master\\\\scm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\abishek_mondal\\\\Desktop\\\\SCM_BLOCKCHAIN-master\\\\scm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\abishek_mondal\\\\Desktop\\\\SCM_BLOCKCHAIN-master\\\\scm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\abishek_mondal\\\\Desktop\\\\SCM_BLOCKCHAIN-master\\\\scm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\abishek_mondal\\\\Desktop\\\\SCM_BLOCKCHAIN-master\\\\scm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\abishek_mondal\\\\Desktop\\\\SCM_BLOCKCHAIN-master\\\\scm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import web3 from'../../../web3';import'../../../../node_modules/bootstrap/dist/css/bootstrap.min.css';import ProductInstance from'../../../interface/product_management';import ChangeOwnerShipInstance from'../../../interface/change_ownership';import Spinner from'../../spinner';var BuildParts=/*#__PURE__*/function(_Component){_inherits(BuildParts,_Component);var _super=_createSuper(BuildParts);function BuildParts(){var _this;_classCallCheck(this,BuildParts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={serial:'',type:'',accounts:[],part_details:{},success:false,loading:false,exist:false,ownership:false,message:''};_this.onChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var part_details;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this.setState({loading:true});_this.setState({success:false});_context.next=5;return ProductInstance.methods.buildPart(_this.state.serial,_this.state.type).send({from:_this.state.accounts[0]}).catch(function(){_this.setState({exist:true});});case 5:part_details=_context.sent;_this.setState({loading:false});setTimeout(function(){return _this.setState({exist:false});},5000);if(part_details!==undefined){_this.setState({success:true});}case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.addOwnership=function(){_this.setState({loading:true,success:false});ChangeOwnerShipInstance.methods.addOwnership(0,_this.state.serial).send({from:_this.state.accounts[0]},function(err){_this.setState({loading:false});if(err){_this.setState({message:\"Add Ownership failed\"});}else{_this.setState({message:\"Add Ownership Succesful\"});}_this.setState({serial:'',type:''});setTimeout(function(){return _this.setState({message:''});},3000);});};return _this;}_createClass(BuildParts,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var accounts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return web3.eth.getAccounts();case 2:accounts=_context2.sent;this.setState({accounts:accounts});case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this$state=this.state,serial=_this$state.serial,type=_this$state.type,exist=_this$state.exist,loading=_this$state.loading,success=_this$state.success,message=_this$state.message;return/*#__PURE__*/React.createElement(\"div\",{className:\"container mx-auto\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-uppercase my-10\"},\"BuildParts\"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"/getParts\",className:\"btn btn-outline-primary btn-sm mx-1\"},\"Part Detials\"),/*#__PURE__*/React.createElement(\"a\",{href:\"/addOwnerShip\",className:\"btn btn-outline-primary btn-sm mx-1\"},\"Add Ownership\"),/*#__PURE__*/React.createElement(\"a\",{href:\"/changeOwnerShip\",className:\"btn btn-outline-primary btn-sm mx-1\"},\"Change Ownership\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onSubmit},exist&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"This Product Already exists!\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"Serial NUmber\"},\"Serial Number\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"serial\",value:serial,onChange:this.onChange}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"type\"},\"Type\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"type\",value:type,onChange:this.onChange}),/*#__PURE__*/React.createElement(\"button\",{className:\"my-2 btn btn-primary\"},\"Build\"),loading&&/*#__PURE__*/React.createElement(Spinner,null)),success&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-success\"},\"Part Build Successfully\"),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},\"Please Add Ownership\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger mx-2\",onClick:this.addOwnership},\"Add Ownership\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},message));}}]);return BuildParts;}(Component);export default BuildParts;","map":{"version":3,"sources":["C:/Users/abishek_mondal/Desktop/SCM_BLOCKCHAIN-master/scm/src/components/build_items/parts/BuildParts.js"],"names":["React","Component","web3","ProductInstance","ChangeOwnerShipInstance","Spinner","BuildParts","state","serial","type","accounts","part_details","success","loading","exist","ownership","message","onChange","e","setState","target","name","value","onSubmit","preventDefault","methods","buildPart","send","from","catch","setTimeout","undefined","addOwnership","err","eth","getAccounts"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport web3 from '../../../web3';\r\nimport '../../../../node_modules/bootstrap/dist/css/bootstrap.min.css'\r\nimport ProductInstance from '../../../interface/product_management';\r\nimport ChangeOwnerShipInstance from '../../../interface/change_ownership';\r\nimport Spinner from '../../spinner';\r\n\r\nclass BuildParts extends Component {\r\n    state = {\r\n        serial: '',\r\n        type: '',\r\n        accounts: [],\r\n        part_details: {},\r\n        success: false,\r\n        loading: false,\r\n        exist: false,\r\n        ownership: false,\r\n        message : ''\r\n    };\r\n\r\n    async componentDidMount() {\r\n        const accounts = await web3.eth.getAccounts();\r\n        this.setState({ accounts });\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value })\r\n    }\r\n\r\n    onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        this.setState({ loading: true });\r\n        this.setState({ success: false });\r\n        const part_details = await ProductInstance.methods.buildPart(this.state.serial, this.state.type)\r\n            .send({ from: this.state.accounts[0] })\r\n            .catch(() => {\r\n                this.setState({ exist: true })\r\n            })\r\n        this.setState({ loading: false });\r\n        setTimeout(() => this.setState({ exist: false }), 5000);\r\n\r\n        if (part_details !== undefined) {\r\n            this.setState({ success: true });\r\n        }\r\n    }\r\n\r\n    addOwnership = () => {\r\n        this.setState({loading:true, success : false});\r\n        ChangeOwnerShipInstance.methods.addOwnership(0,this.state.serial)\r\n            .send({from : this.state.accounts[0]} ,(err)=>{\r\n                this.setState({loading:false});\r\n                if(err){\r\n                    this.setState({message : \"Add Ownership failed\"});\r\n                }\r\n                else{\r\n                    this.setState({message : \"Add Ownership Succesful\"});\r\n                }\r\n                this.setState({serial : '', type:''});\r\n                setTimeout(() => this.setState({message : ''}),3000)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { serial, type, exist, loading, success, message } = this.state;\r\n        return (\r\n            <div className=\"container mx-auto\">\r\n                <h1 className=\"text-uppercase my-10\">BuildParts</h1>\r\n                <span>\r\n                    <a href=\"/getParts\" className=\"btn btn-outline-primary btn-sm mx-1\">Part Detials</a>\r\n                    <a href=\"/addOwnerShip\" className=\"btn btn-outline-primary btn-sm mx-1\">Add Ownership</a>\r\n                    <a href=\"/changeOwnerShip\" className=\"btn btn-outline-primary btn-sm mx-1\">Change Ownership</a>\r\n                </span>\r\n                <form onSubmit={this.onSubmit}>\r\n                    {exist && <div className=\"alert alert-danger\" role=\"alert\">\r\n                        This Product Already exists!\r\n                    </div>}\r\n                    <label htmlFor=\"Serial NUmber\">Serial Number</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"serial\"\r\n                        value={serial} onChange={this.onChange} />\r\n                    <label htmlFor=\"type\">Type</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"type\"\r\n                        value={type} onChange={this.onChange} />\r\n                    <button className=\"my-2 btn btn-primary\">Build</button>\r\n                    {loading && <Spinner />}\r\n                </form>\r\n                {success &&\r\n                    <div>\r\n                        <div className=\"text-success\">Part Build Successfully</div>\r\n                        <span className=\"text-danger\">Please Add Ownership</span>\r\n                        <button className=\"btn btn-danger mx-2\" onClick={this.addOwnership}>Add Ownership</button>\r\n                    </div>\r\n                }\r\n                <span className=\"text-danger\">{message}</span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BuildParts;"]},"metadata":{},"sourceType":"module"}